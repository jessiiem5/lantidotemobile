function renumber_winners(){var t=jQuery;t(".fca-cc-winner-count").each(function(a){t(this).html(a+1)})}jQuery(document).ready(function(t){function a(){t(".fca-cc-reject-winner").unbind("click"),t(".fca-cc-reject-winner").click(function(){var a=t(this).prop("disabled",!0),e=a.html();a.html("..."),jQuery.ajax({url:adminData.ajaxurl,type:"POST",data:{action:"fca_cc_reject_winner",nonce:adminData.nonce,post_id:adminData.post_id,id:t(this).data("winner-id")}}).done(function(n){n.success?a.closest("tr").fadeOut(400,function(){t(this).remove(),renumber_winners()}):(a.html(e),a.prop("disabled",!1),alert("An error occured - try reloading the page and trying again."))})})}t("#fca-cc-pick-winner-button").click(function(){var e=t(this).prop("disabled",!0),n=e.html();e.html("..."),jQuery.ajax({url:adminData.ajaxurl,type:"POST",data:{action:"fca_cc_get_winner",nonce:adminData.nonce,post_id:adminData.post_id}}).done(function(c){console.log(c),e.html(n).prop("disabled",!1),c.success?(t(".fca-cc-winning-entries").append('<tr><td class="fca-cc-winner-count">#</td><td>'+c.data.name+'</td><td><input class="fca-cc-email-input" type="text" readonly="readonly" onclick="this.select()" value="'+c.data.email+'"/></td><td>'+c.data.time+"</td><td>"+c.data.ip+'</td><td class="fca-cc-status-toggle-td"><button type="button" class="button button-secondary fca-cc-reject-winner" data-winner-id="'+c.data.id+'" >Reject</button></td></tr>').show(),a(),renumber_winners()):alert("No eligible entries found")})}),a(),t(".fca-cc-toggle-eligible").click(function(){var a=t(this).prop("disabled",!0),e=a.html();a.html("..."),jQuery.ajax({url:adminData.ajaxurl,type:"POST",data:{action:"fca_cc_set_eligible_status",nonce:adminData.nonce,post_id:adminData.post_id,id:t(this).data("entry-id"),status:"rejected"===t(this).closest("td").siblings(".fca-cc-status").html()?"eligible":"rejected"}}).done(function(t){if(console.log(t),a.prop("disabled",!1),t.success){var n=a.data("alttext");a.data("alttext",e),a.html(n);var c="rejected"===a.closest("td").siblings(".fca-cc-status").html()?"eligible":"rejected";a.closest("td").siblings(".fca-cc-status").html(c)}else a.html(e),alert("An error occured - try reloading the page and trying again.")})})});